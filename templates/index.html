{% extends "base.html" %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">
  window.fbAsyncInit = function() {
    function checkLoginState() {
      FB.getLoginStatus(changeLoginState);
    }

    FB.init({
      appId      : '904320642985464',
      cookie     : true,
      xfbml      : true,
      version    : 'v2.5'
    });

    function changeLoginState(response) {
      if (response.status === 'connected') {
        FB.api('/me/picture?height=10000', function(response) {
          document.getElementById('before').src = response.data.url;
        });
        document.getElementById('status').innerHTML = 'Logged in!';
      } else if (response.status === 'not_authorized') {
        document.getElementById('status').innerHTML = 'Logged in to FB, not app.';
      } else {
        document.getElementById('status').innerHTML = 'Not logged into FB.';
      }
    }

    FB.getLoginStatus(changeLoginState);
  };

  (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {
      return;
    }
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>
{% endblock %}

{% block content %}
<div class="container">
  <h1>Trumpify Yourself</h1>
  <h2>Make your profile <em>unstumpable!</em></h2>
  <table border=0 width="100%">
    <tr>
      <td>Drag your selfie here<br />or log into facebook below</td>
      <td></td>
      <td></td>
      <td></td>
      <td>After</td>
    </tr>
    <tr valign=center>
      <td><img id="before" src="http://placehold.it/200x300" alt="Profile Picture"></td>
      <td class=a>+</td>
      <td><img src="static/hair.png" id="hair" width="150" /></td>
      <td class=a>=</td>
      <td><img id="after" src="http://placehold.it/200x300" alt="Trumpified"></td>
    </tr>
  </table>
  <div class="row">
      <form action="/upload" id="image-upload" enctype="multipart/form-data" method="POST">
        <input name="file" type="file"/>
        <input type="submit"/>
      </form>
    <div class="col-md-6">
      <fb:login-button scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button>
      <p id="status">Status</p>
    </div>
  </div>
  <hr />
  <div
    class="fb-like"
    data-share="true"
    data-width="450"
    data-show-faces="true">
  </div>
</div>
{% endblock %}
